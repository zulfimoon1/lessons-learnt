import{c as k,j as e,w as j,x as C,a as y,y as S,z as W,E,r as f,u as A,b as F,d as P,e as _,f as D,g as R,L as i,q as h,k as G,s as L}from"./index-KPEZ0muq.js";import{C as I,E as T}from"./checkbox-Dj8IvW5t.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=k("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),g=({rating:l,onRatingChange:d,labels:s=[],className:o})=>e.jsxs("div",{className:j("space-y-3",o),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map(a=>e.jsx("button",{type:"button",onClick:()=>d(a),className:"transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded",children:e.jsx(C,{className:j("w-8 h-8 transition-colors duration-200",a<=l?"text-yellow-400 fill-yellow-400":"text-gray-300 hover:text-yellow-300")})},a)),l>0&&e.jsxs("span",{className:"text-sm font-medium text-gray-600 ml-2",children:[l,"/5"]})]}),s.length>0&&l>0&&e.jsx("div",{className:"text-sm text-gray-600 bg-gray-50 px-3 py-2 rounded-lg border",children:e.jsx("span",{className:"font-medium",children:s[l-1]})})]}),b=[{value:"excited",label:"Excited",emoji:"ðŸ˜„",color:"bg-yellow-100 border-yellow-300 text-yellow-800"},{value:"happy",label:"Happy",emoji:"ðŸ˜Š",color:"bg-green-100 border-green-300 text-green-800"},{value:"confident",label:"Confident",emoji:"ðŸ˜Œ",color:"bg-blue-100 border-blue-300 text-blue-800"},{value:"calm",label:"Calm",emoji:"ðŸ˜‡",color:"bg-indigo-100 border-indigo-300 text-indigo-800"},{value:"neutral",label:"Neutral",emoji:"ðŸ˜",color:"bg-gray-100 border-gray-300 text-gray-800"},{value:"confused",label:"Confused",emoji:"ðŸ˜•",color:"bg-orange-100 border-orange-300 text-orange-800"},{value:"frustrated",label:"Frustrated",emoji:"ðŸ˜¤",color:"bg-red-100 border-red-300 text-red-800"},{value:"anxious",label:"Anxious",emoji:"ðŸ˜°",color:"bg-purple-100 border-purple-300 text-purple-800"},{value:"overwhelmed",label:"Overwhelmed",emoji:"ðŸ˜µ",color:"bg-pink-100 border-pink-300 text-pink-800"}],O=({selectedState:l,onStateChange:d})=>{var s,o;return e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select how you felt emotionally during the lesson. This helps your teacher understand the classroom environment."}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-3",children:b.map(a=>e.jsxs("button",{type:"button",onClick:()=>d(a.value),className:j("flex flex-col items-center p-4 rounded-xl border-2 transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",l===a.value?`${a.color} border-current shadow-md`:"bg-white border-gray-200 hover:border-gray-300 text-gray-600"),children:[e.jsx("span",{className:"text-2xl mb-2",children:a.emoji}),e.jsx("span",{className:"text-xs font-medium text-center leading-tight",children:a.label})]},a.value))}),l&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("span",{className:"font-medium",children:"Selected:"})," ",(s=b.find(a=>a.value===l))==null?void 0:s.label,e.jsx("span",{className:"ml-2",children:(o=b.find(a=>a.value===l))==null?void 0:o.emoji})]})})]})},q=()=>(y(),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(S,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-sm text-blue-900",children:"Data Protection & Privacy"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-xs",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(W,{className:"w-4 h-4 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"End-to-End Encryption"}),e.jsx("p",{className:"text-gray-600",children:"All data encrypted in transit and at rest"})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(E,{className:"w-4 h-4 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Access Control"}),e.jsx("p",{className:"text-gray-600",children:"Role-based permissions and audit logging"})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(H,{className:"w-4 h-4 text-orange-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Compliance Ready"}),e.jsx("p",{className:"text-gray-600",children:"GDPR, HIPAA, and SOC 2 compliant"})]})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Student data is anonymized by default. Personal information is protected under educational privacy laws."})]})),z=({classScheduleId:l,student:d})=>{const[s,o]=f.useState({understanding:0,interest:0,educationalGrowth:0,emotionalState:"",whatWentWell:"",suggestions:"",additionalComments:"",isAnonymous:!1}),[a,p]=f.useState(!1),{toast:c}=A(),{t}=y(),v=async n=>{n.preventDefault(),p(!0);try{const{error:r}=await L.from("feedback").insert([{class_schedule_id:l,understanding:s.understanding,interest:s.interest,educational_growth:s.educationalGrowth,emotional_state:s.emotionalState,what_went_well:s.whatWentWell,suggestions:s.suggestions,additional_comments:s.additionalComments,is_anonymous:s.isAnonymous,submitted_at:new Date().toISOString()}]);r?(console.error("Error submitting feedback:",r),c({title:t("common.error"),description:t("feedback.submitFailed"),variant:"destructive"})):(c({title:t("feedback.submitted"),description:t("feedback.submitSuccess")}),o({understanding:0,interest:0,educationalGrowth:0,emotionalState:"",whatWentWell:"",suggestions:"",additionalComments:"",isAnonymous:!1}))}catch(r){console.error("Unexpected error:",r),c({title:t("common.error"),description:t("feedback.unexpectedError"),variant:"destructive"})}finally{p(!1)}},m=n=>{const{name:r,value:x}=n.target;o(N=>({...N,[r]:x}))},u=(n,r)=>{o(x=>({...x,[n]:r}))},w=n=>{o(r=>({...r,emotionalState:n}))};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(q,{}),e.jsxs(F,{children:[e.jsxs(P,{children:[e.jsx(_,{children:t("feedback.title")}),e.jsx(D,{children:t("feedback.description")})]}),e.jsx(R,{children:e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:t("feedback.understanding")}),e.jsx(g,{rating:s.understanding,onRatingChange:n=>u("understanding",n)})]}),e.jsxs("div",{children:[e.jsx(i,{children:t("feedback.interest")}),e.jsx(g,{rating:s.interest,onRatingChange:n=>u("interest",n)})]}),e.jsxs("div",{children:[e.jsx(i,{children:t("feedback.growth")}),e.jsx(g,{rating:s.educationalGrowth,onRatingChange:n=>u("educationalGrowth",n)})]}),e.jsxs("div",{children:[e.jsx(i,{children:t("feedback.emotionalState")}),e.jsx(O,{onStateChange:w,selectedState:s.emotionalState})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"whatWentWell",children:t("feedback.whatWentWell")}),e.jsx(h,{id:"whatWentWell",name:"whatWentWell",value:s.whatWentWell,onChange:m,placeholder:t("feedback.whatWentWellPlaceholder"),rows:3})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"suggestions",children:t("feedback.suggestions")}),e.jsx(h,{id:"suggestions",name:"suggestions",value:s.suggestions,onChange:m,placeholder:t("feedback.suggestionsPlaceholder"),rows:3})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"additionalComments",children:t("feedback.additionalComments")}),e.jsx(h,{id:"additionalComments",name:"additionalComments",value:s.additionalComments,onChange:m,placeholder:t("feedback.additionalCommentsPlaceholder"),rows:3})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{id:"isAnonymous",checked:s.isAnonymous,onCheckedChange:n=>o(r=>({...r,isAnonymous:!!n}))}),e.jsxs(i,{htmlFor:"isAnonymous",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed flex items-center gap-1",children:[t("feedback.anonymous"),e.jsx(T,{className:"w-4 h-4 text-gray-500"})]})]}),e.jsx(G,{disabled:a,className:"bg-green-600 hover:bg-green-700",children:t(a?"common.submitting":"feedback.submit")})]})})]})]})},U=()=>e.jsx("div",{className:"space-y-6",children:e.jsx(z,{})});export{U as default};
